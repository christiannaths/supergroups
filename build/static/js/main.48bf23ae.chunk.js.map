{"version":3,"sources":["useStickyState.js","components/Player.js","components/Team.js","logo.svg","App.js","index.js"],"names":["useStickyState","defaultValue","key","stateKey","useState","stickyValue","window","localStorage","getItem","JSON","parse","value","setValue","useEffect","setItem","stringify","Player","player","onChange","onDelete","isEditing","setIsEditing","handleEditToggle","useCallback","state","handleDelete","id","className","type","name","onFocus","target","setSelectionRange","length","event","autoFocus","onClick","aria-hidden","defaultProps","Team","players","onPlayerChange","onPlayerDelete","map","i","sortByGp","a","b","gp","DEFAULT_PLAYERS","nanoid","App","setPlayers","teamSize","setTeamSize","shuffleNotify","setShuffleNotify","handlePlayerAdd","newPlayer","p","handlePlayerChange","find","handlePlayerDelete","newState","filter","handlePlayersShuffle","data","j","Math","floor","random","shuffle","sort","handleTeamSizeChange","Number","parseInt","useMemo","half","ceil","slice","matchSize","team1","team2","bench","includes","forEach","playerIndex","findIndex","src","logoUrl","alt","max","ReactDOM","render","document","getElementById"],"mappings":"6PAiBeA,MAff,SAAwBC,EAAcC,GACpC,IAAMC,EAAQ,qBAAiBD,GAE/B,EAA0BE,oBAAS,WACjC,IAAMC,EAAcC,OAAOC,aAAaC,QAAQL,GAChD,OAAuB,OAAhBE,EACHI,KAAKC,MAAML,GACXJ,KAJN,mBAAOU,EAAP,KAAcC,EAAd,KASA,OAHAC,qBAAU,WACRP,OAAOC,aAAaO,QAAQX,EAAUM,KAAKM,UAAUJ,MACpD,CAACR,EAAUQ,IACP,CAACA,EAAOC,I,eCTjB,SAASI,EAAT,GAAiD,IAA/BC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,SAAUC,EAAY,EAAZA,SAClC,EAAkCf,oBAAS,GAA3C,mBAAOgB,EAAP,KAAkBC,EAAlB,KAEMC,EAAmBC,uBAAY,WACnCF,GAAa,SAAAG,GAAK,OAAKA,OACtB,IAEGC,EAAeF,uBACnB,WACEF,GAAa,GACbF,EAASF,EAAOS,MAElB,CAACP,EAAUF,EAAOS,KAGpB,OAAKN,EAQH,qBAAIO,UAAU,SAAd,UACE,uBACEA,UAAU,oBACVC,KAAK,OACL3B,aAAcgB,EAAOY,KACrBC,QAAS,gBAAGC,EAAH,EAAGA,OAAH,OACPA,EAAOC,kBAAkB,EAAGD,EAAOpB,MAAMsB,SAE3Cf,SAAU,SAAAgB,GAAK,OAAIhB,EAASD,EAAOS,GAAIQ,EAAMH,OAAOpB,QACpDwB,WAAW,IAEb,sBAAKR,UAAU,uBAAf,UACE,wBAAQA,UAAU,mBAAmBS,QAASd,EAA9C,SACE,mBAAGK,UAAU,cAAcU,cAAY,WAEzC,wBAAQV,UAAU,qBAAqBS,QAASX,EAAhD,SACE,mBAAGE,UAAU,gBAAgBU,cAAY,iBAtB7C,oBAAIV,UAAU,SAASS,QAASd,EAAhC,SACGL,EAAOY,OAgChBb,EAAOsB,aAAe,CACpBT,KAAM,cAGOb,Q,MCtDf,SAASuB,EAAT,GAAkE,IAAlDC,EAAiD,EAAjDA,QAASX,EAAwC,EAAxCA,KAAMY,EAAkC,EAAlCA,eAAgBC,EAAkB,EAAlBA,eAC7C,OACE,sBAAKf,UAAU,OAAf,UACE,oBAAIA,UAAU,aAAd,SAA4BE,IAC5B,oBAAIF,UAAU,eAAd,SACGa,EAAQG,KAAI,SAAC1B,EAAQ2B,GAAT,OACX,cAAC,EAAD,CAEE3B,OAAQA,EACRC,SAAUuB,EACVtB,SAAUuB,GAHLE,WAgBjBL,EAAKD,aAAe,CAClBE,QAAS,GACTX,KAAM,cAGOU,QCjCA,MAA0B,iCCiBzC,SAASM,EAASC,EAAGC,GACnB,OAAID,EAAEE,GAAKD,EAAEC,IAAY,GACrBD,EAAEC,GAAKF,EAAEE,GAAW,GAK1B,IAEMC,EAAkB,CACtB,CAAEvB,GAAIwB,cAAUrB,KAAM,WAAYmB,GAAI,GACtC,CAAEtB,GAAIwB,cAAUrB,KAAM,WAAYmB,GAAI,GACtC,CAAEtB,GAAIwB,cAAUrB,KAAM,WAAYmB,GAAI,GACtC,CAAEtB,GAAIwB,cAAUrB,KAAM,WAAYmB,GAAI,GACtC,CAAEtB,GAAIwB,cAAUrB,KAAM,WAAYmB,GAAI,GACtC,CAAEtB,GAAIwB,cAAUrB,KAAM,WAAYmB,GAAI,GACtC,CAAEtB,GAAIwB,cAAUrB,KAAM,WAAYmB,GAAI,GACtC,CAAEtB,GAAIwB,cAAUrB,KAAM,WAAYmB,GAAI,IAmMzBG,MA9Lf,WACE,MAA8BnD,EAC5BiD,EACA,WAFF,mBAAOT,EAAP,KAAgBY,EAAhB,KAKA,EAAgCpD,EARR,EAUtB,YAFF,mBAAOqD,EAAP,KAAiBC,EAAjB,KAKA,EAA0ClD,oBAAS,GAAnD,mBAAOmD,EAAP,KAAsBC,EAAtB,KAEMC,EAAkBlC,uBACtB,WACE,IAAMmC,EAAY,CAAEhC,GAAIwB,cAAUrB,KAAM,aAAcmB,GAAI,GAC1DI,GAAW,SAAA5B,GAAK,4BACXA,EAAMmB,KAAI,SAAAgB,GAAC,kCAAUA,GAAV,IAAaX,GAAI,QADjB,CAEdU,SAGJ,CAACN,IAGGQ,EAAqBrC,uBACzB,SAAUG,EAAIf,GACZ6B,EAAQqB,MAAK,SAAAF,GAAC,OAAIA,EAAEjC,KAAOA,KAAIG,KAAOlB,EACtCyC,EAAW,YAAIZ,MAEjB,CAACA,EAASY,IAGNU,EAAqBvC,uBACzB,SAAUG,GACR,IAAMqC,EAAWvB,EAAQwB,QAAO,SAAA/C,GAAM,OAAIA,EAAOS,KAAOA,KACxD0B,EAAWW,KAEb,CAACvB,EAASY,IAGNa,EAAuB1C,uBAC3B,WACE6B,GAAW,SAAA5B,GAGT,OA7ER,SAAiBsB,GAGf,IAFA,IAAMoB,EAAI,YAAOpB,GAERF,EAAIsB,EAAKjC,OAAQW,EAAGA,IAAK,CAChC,IAAIuB,EAAIC,KAAKC,MAAMD,KAAKE,SAAW1B,GADH,EAEP,CAACsB,EAAKC,GAAID,EAAKtB,EAAI,IAA3CsB,EAAKtB,EAAI,GAFsB,KAElBsB,EAAKC,GAFa,KAIlC,OAAOD,EAoEuBK,CAAQ/C,GACMgD,KAAK3B,MAI7CW,GAAiB,KAEnB,CAACJ,IAGGqB,EAAuBlD,uBAC3B,SAAUW,GACR,IAAMvB,EAAQuB,EAAMH,OAAOpB,OAAS,EACpC2C,EAAYoB,OAAOC,SAAShE,EAAO,OAErC,CAAC2C,IAGH,EAA8BsB,mBAC5B,WACE,IAAKvB,EAAU,CACb,IAAMwB,EAAOT,KAAKU,KAAKtC,EAAQP,OAAS,GACxC,MAAO,CAACO,EAAQuC,MAAM,EAAGF,GAAOrC,EAAQuC,MAAMF,GAAO,IAGvD,IAAMG,EAAY3B,EAAWA,EAE7B,MAAO,CACLb,EAAQuC,MAAM,EAAG1B,GACjBb,EAAQuC,MAAM1B,EAAU2B,GACxBxC,EAAQuC,MAAMC,MAGlB,CAACxC,EAASa,IAfZ,mBAAO4B,EAAP,KAAcC,EAAd,KAAqBC,EAArB,KAqDA,OAnCAtE,qBACE,WACEuC,GAAW,SAAA5B,GAmBT,OAlBAA,EACGwC,QAAO,SAAA/C,GACN,OACEgE,EAAMtC,KAAI,SAAAgB,GAAC,OAAIA,EAAEjC,MAAI0D,SAASnE,EAAOS,KACrCwD,EAAMvC,KAAI,SAAAgB,GAAC,OAAIA,EAAEjC,MAAI0D,SAASnE,EAAOS,OAGxCiB,KAAI,SAAA1B,GAAM,kCACNA,GADM,IAET+B,GAAI/B,EAAO+B,GAAK,OAEjBqC,SAAQ,SAAApE,GACP,IAAMqE,EAAc9D,EAAM+D,WACxB,SAAA5B,GAAC,OAAIA,EAAEjC,KAAOT,EAAOS,MAEvBF,EAAM8D,GAAerE,KAGlBO,OAGX,CAAC2D,EAAO/B,EAAY6B,EAAOC,IAG7BrE,qBACE,WACO0C,GACLC,GAAiB,KAEnB,CAACD,IAID,sBAAK5B,UAAU,MAAf,UACE,wBAAQA,UAAU,aAAlB,SACE,qBACEA,UAAU,kBACV6D,IAAKC,EACLC,IAAI,qBAIR,0BAAS/D,UAAU,UAAnB,UACE,wBACEA,UAAS,0BACP0B,EAAW,GAAK,kBAFpB,uBAME,uBACEzB,KAAK,MACLD,UAAU,oBACVhB,MAAO0C,EACPnC,SAAUuD,EACVtC,WAAW,EACXL,QAAS,gBAAGC,EAAH,EAAGA,OAAH,OACPA,EAAOC,kBAAkB,EAAGD,EAAOpB,MAAMsB,cAK/C,yBACEN,UAAU,qBACVS,QAASqB,EAFX,0BAIkB,IAChB,mBAAG9B,UAAU,kBAAkBU,cAAY,eAI/C,0BACEV,UAAS,eAAU4B,EAAgB,SAAW,aADhD,UAGE,sBAAK5B,UAAU,eAAf,mBACSyC,KAAKuB,IAAL,MAAAvB,KAAI,YAAQ5B,EAAQG,KAAI,SAAAgB,GAAC,OAAIA,EAAEX,WAExC,sBAAKrB,UAAU,aAAf,UACE,cAAC,EAAD,CACEE,KAAK,SACLW,QAASyC,EACTxC,eAAgBmB,EAChBlB,eAAgBoB,IAElB,cAAC,EAAD,CACEjC,KAAK,SACLW,QAAS0C,EACTzC,eAAgBmB,EAChBlB,eAAgBoB,UAKtB,yBAASnC,UAAU,QAAnB,SACE,cAAC,EAAD,CACEE,KAAK,QACLW,QAAS2C,EACT1C,eAAgBmB,EAChBlB,eAAgBoB,MAIpB,wBAAQnC,UAAU,eAAeS,QAAS6B,EAA1C,SACE,mBAAGtC,UAAU,oBAAoBU,cAAY,e,YCzNrDuD,IAASC,OAAO,cAAC,EAAD,IAASC,SAASC,eAAe,W","file":"static/js/main.48bf23ae.chunk.js","sourcesContent":["import { useState, useEffect } from 'react';\n\nfunction useStickyState(defaultValue, key) {\n  const stateKey = `superteams_${key}`;\n\n  const [value, setValue] = useState(() => {\n    const stickyValue = window.localStorage.getItem(stateKey);\n    return stickyValue !== null\n      ? JSON.parse(stickyValue)\n      : defaultValue;\n  });\n  useEffect(() => {\n    window.localStorage.setItem(stateKey, JSON.stringify(value));\n  }, [stateKey, value]);\n  return [value, setValue];\n}\n\nexport default useStickyState;\n","import React from 'react';\nimport { useState, useCallback } from 'react';\nimport PropTypes from 'prop-types';\nimport './player.css';\n\nfunction Player({ player, onChange, onDelete }) {\n  const [isEditing, setIsEditing] = useState(false);\n\n  const handleEditToggle = useCallback(function () {\n    setIsEditing(state => !state);\n  }, []);\n\n  const handleDelete = useCallback(\n    function () {\n      setIsEditing(false);\n      onDelete(player.id);\n    },\n    [onDelete, player.id],\n  );\n\n  if (!isEditing)\n    return (\n      <li className=\"player\" onClick={handleEditToggle}>\n        {player.name}\n      </li>\n    );\n\n  return (\n    <li className=\"player\">\n      <input\n        className=\"player-edit-input\"\n        type=\"text\"\n        defaultValue={player.name}\n        onFocus={({ target }) =>\n          target.setSelectionRange(0, target.value.length)\n        }\n        onChange={event => onChange(player.id, event.target.value)}\n        autoFocus={true}\n      />\n      <div className=\"player-edit-controls\">\n        <button className=\"player-edit-done\" onClick={handleEditToggle}>\n          <i className=\"fa fa-check\" aria-hidden=\"true\"></i>\n        </button>\n        <button className=\"player-edit-delete\" onClick={handleDelete}>\n          <i className=\"fa fa-trash-o\" aria-hidden=\"true\"></i>\n        </button>\n      </div>\n    </li>\n  );\n}\n\nPlayer.propTypes = {\n  name: PropTypes.string.isRequired,\n};\n\nPlayer.defaultProps = {\n  name: 'New Player',\n};\n\nexport default Player;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Player from './Player';\nimport './team.css';\n\nfunction Team({ players, name, onPlayerChange, onPlayerDelete }) {\n  return (\n    <div className=\"team\">\n      <h1 className=\"team-title\">{name}</h1>\n      <ol className=\"team-players\">\n        {players.map((player, i) => (\n          <Player\n            key={i}\n            player={player}\n            onChange={onPlayerChange}\n            onDelete={onPlayerDelete}\n          />\n        ))}\n      </ol>\n    </div>\n  );\n}\n\nTeam.propTypes = {\n  players: PropTypes.array.isRequired,\n  name: PropTypes.string,\n};\n\nTeam.defaultProps = {\n  players: [],\n  name: 'The Pylons',\n};\n\nexport default Team;\n","export default __webpack_public_path__ + \"static/media/logo.cae3eeef.svg\";","import React from 'react';\nimport { useState, useCallback, useMemo, useEffect } from 'react';\nimport { nanoid } from 'nanoid';\nimport useStickyState from './useStickyState';\nimport Team from './components/Team';\nimport logoUrl from './logo.svg';\n\nfunction shuffle(a) {\n  const data = [...a];\n\n  for (let i = data.length; i; i--) {\n    let j = Math.floor(Math.random() * i);\n    [data[i - 1], data[j]] = [data[j], data[i - 1]];\n  }\n  return data;\n}\n\nfunction sortByGp(a, b) {\n  if (a.gp < b.gp) return -1;\n  if (b.gp < a.gp) return 1;\n\n  return 1;\n}\n\nconst APP_NAME = 'Catalina Team Mixer';\n\nconst DEFAULT_PLAYERS = [\n  { id: nanoid(), name: 'Player 1', gp: 0 },\n  { id: nanoid(), name: 'Player 2', gp: 0 },\n  { id: nanoid(), name: 'Player 3', gp: 0 },\n  { id: nanoid(), name: 'Player 4', gp: 0 },\n  { id: nanoid(), name: 'Player 5', gp: 0 },\n  { id: nanoid(), name: 'Player 6', gp: 0 },\n  { id: nanoid(), name: 'Player 7', gp: 0 },\n  { id: nanoid(), name: 'Player 8', gp: 0 },\n];\n\nconst DEFAULT_TEAM_SIZE = 3;\n\nfunction App() {\n  const [players, setPlayers] = useStickyState(\n    DEFAULT_PLAYERS,\n    'players',\n  );\n\n  const [teamSize, setTeamSize] = useStickyState(\n    DEFAULT_TEAM_SIZE,\n    'teamSize',\n  );\n\n  const [shuffleNotify, setShuffleNotify] = useState(false);\n\n  const handlePlayerAdd = useCallback(\n    function () {\n      const newPlayer = { id: nanoid(), name: 'New Player', gp: 0 };\n      setPlayers(state => [\n        ...state.map(p => ({ ...p, gp: 0 })),\n        newPlayer,\n      ]);\n    },\n    [setPlayers],\n  );\n\n  const handlePlayerChange = useCallback(\n    function (id, value) {\n      players.find(p => p.id === id).name = value;\n      setPlayers([...players]);\n    },\n    [players, setPlayers],\n  );\n\n  const handlePlayerDelete = useCallback(\n    function (id) {\n      const newState = players.filter(player => player.id !== id);\n      setPlayers(newState);\n    },\n    [players, setPlayers],\n  );\n\n  const handlePlayersShuffle = useCallback(\n    function () {\n      setPlayers(state => {\n        const shuffledPlayers = shuffle(state);\n        const rankedPlayers = shuffledPlayers.sort(sortByGp);\n        return rankedPlayers;\n      });\n\n      setShuffleNotify(true);\n    },\n    [setPlayers],\n  );\n\n  const handleTeamSizeChange = useCallback(\n    function (event) {\n      const value = event.target.value || 0;\n      setTeamSize(Number.parseInt(value, 10));\n    },\n    [setTeamSize],\n  );\n\n  const [team1, team2, bench] = useMemo(\n    function () {\n      if (!teamSize) {\n        const half = Math.ceil(players.length / 2);\n        return [players.slice(0, half), players.slice(half), []];\n      }\n\n      const matchSize = teamSize + teamSize;\n\n      return [\n        players.slice(0, teamSize),\n        players.slice(teamSize, matchSize),\n        players.slice(matchSize),\n      ];\n    },\n    [players, teamSize],\n  );\n\n  useEffect(\n    function () {\n      setPlayers(state => {\n        state\n          .filter(player => {\n            return (\n              team1.map(p => p.id).includes(player.id) ||\n              team2.map(p => p.id).includes(player.id)\n            );\n          })\n          .map(player => ({\n            ...player,\n            gp: player.gp + 1,\n          }))\n          .forEach(player => {\n            const playerIndex = state.findIndex(\n              p => p.id === player.id,\n            );\n            state[playerIndex] = player;\n          });\n\n        return state;\n      });\n    },\n    [bench, setPlayers, team1, team2],\n  );\n\n  useEffect(\n    function () {\n      if (!shuffleNotify) return;\n      setShuffleNotify(false);\n    },\n    [shuffleNotify],\n  );\n\n  return (\n    <div className=\"app\">\n      <header className=\"app-header\">\n        <img\n          className=\"app-header-logo\"\n          src={logoUrl}\n          alt=\"Team Scrambler\"\n        />\n      </header>\n\n      <section className=\"options\">\n        <label\n          className={`team-size-field ${\n            teamSize ? '' : '-strikethrough'\n          }`}\n        >\n          Team Size:\n          <input\n            type=\"tel\"\n            className=\"player-edit-input\"\n            value={teamSize}\n            onChange={handleTeamSizeChange}\n            autoFocus={false}\n            onFocus={({ target }) =>\n              target.setSelectionRange(0, target.value.length)\n            }\n          />\n        </label>\n\n        <button\n          className=\"options-add-player\"\n          onClick={handlePlayerAdd}\n        >\n          Add&nbsp;Player{' '}\n          <i className=\"fa fa-user-plus\" aria-hidden=\"true\"></i>\n        </button>\n      </section>\n\n      <section\n        className={`game ${shuffleNotify ? '-flash' : '-no-flash'}`}\n      >\n        <div className=\"game-counter\">\n          Game #{Math.max(...players.map(p => p.gp))}\n        </div>\n        <div className=\"game-teams\">\n          <Team\n            name=\"Team 1\"\n            players={team1}\n            onPlayerChange={handlePlayerChange}\n            onPlayerDelete={handlePlayerDelete}\n          />\n          <Team\n            name=\"Team 2\"\n            players={team2}\n            onPlayerChange={handlePlayerChange}\n            onPlayerDelete={handlePlayerDelete}\n          />\n        </div>\n      </section>\n\n      <section className=\"bench\">\n        <Team\n          name=\"Bench\"\n          players={bench}\n          onPlayerChange={handlePlayerChange}\n          onPlayerDelete={handlePlayerDelete}\n        />\n      </section>\n\n      <button className=\"game-shuffle\" onClick={handlePlayersShuffle}>\n        <i className=\"icon fa fa-random\" aria-hidden=\"true\"></i>\n      </button>\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport './reset.css';\nimport './index.css';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}